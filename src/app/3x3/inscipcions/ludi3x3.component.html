<!-- app/3x3/inscripcions/ludi3x3.component.html -->

<div class="container">
  <h1>Basketball Tournament Sign-Up</h1>
  <form [formGroup]="teamForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="teamName">Team Name</label>
      <input
        id="teamName"
        formControlName="teamName"
        placeholder="Enter team name"
      />
      <div
        *ngIf="
          teamForm.get('teamName')?.invalid && teamForm.get('teamName')?.touched
        "
      >
        Team Name is required.
      </div>
    </div>

    <div formArrayName="players">
      <h2>Players (3 to 5)</h2>
      <div
        *ngFor="let player of players.controls; let i = index"
        [formGroupName]="i"
        class="player"
      >
        <h3>Player {{ i + 1 }}</h3>

        <div class="form-group">
          <label for="playerName">Player Name</label>
          <input
            id="playerName"
            formControlName="playerName"
            placeholder="Enter player name"
          />
          <div
            *ngIf="
              player.get('playerName')?.invalid &&
              player.get('playerName')?.touched
            "
          >
            Player Name is required.
          </div>
        </div>

        <div class="form-group">
          <label for="birthDate">Birth Date</label>
          <input type="date" id="birthDate" formControlName="birthDate" />
          <div
            *ngIf="
              player.get('birthDate')?.invalid &&
              player.get('birthDate')?.touched
            "
          >
            Birth Date is required.
          </div>
        </div>

        <div class="form-group">
          <label for="shirtSize">Shirt Size</label>
          <input
            id="shirtSize"
            formControlName="shirtSize"
            placeholder="Enter shirt size"
          />
          <div
            *ngIf="
              player.get('shirtSize')?.invalid &&
              player.get('shirtSize')?.touched
            "
          >
            Shirt Size is required.
          </div>
        </div>

        <button
          *ngIf="players.length > 3"
          type="button"
          (click)="removePlayer(i)"
        >
          Remove Player
        </button>
      </div>

      <button *ngIf="players.length < 5" type="button" (click)="addPlayer()">
        Add Player
      </button>
    </div>

    <div class="form-group">
      <label for="contactPhone">Contact Phone</label>
      <input
        id="contactPhone"
        formControlName="contactPhone"
        placeholder="Enter phone number"
      />
      <div
        *ngIf="
          teamForm.get('contactPhone')?.invalid &&
          teamForm.get('contactPhone')?.touched
        "
      >
        Valid 10-digit phone number is required.
      </div>
    </div>

    <div class="form-group">
      <label for="contactEmail">Contact Email</label>
      <input
        id="contactEmail"
        formControlName="contactEmail"
        placeholder="Enter email"
      />
      <div
        *ngIf="
          teamForm.get('contactEmail')?.invalid &&
          teamForm.get('contactEmail')?.touched
        "
      >
        Valid email is required.
      </div>
    </div>

    <button type="submit" [disabled]="teamForm.invalid">Submit</button>
  </form>
</div>
